# ESPECIFICACIONES T√âCNICAS: EL PREDICADOR CAT√ìLICO
## Aplicaci√≥n Web para Creaci√≥n de Sermones Cat√≥licos
# Descripciones Funcionales

Este documento registra, de forma secuencial y clara, cada funci√≥n, componente o parte relevante desarrollada en la aplicaci√≥n "El Predicador Cat√≥lico" durante la Fase 1 y siguientes. No contiene c√≥digo, solo explicaciones funcionales.

---

## Fase 1: Cimientos y Estructura Principal

### 2025-08-24

**Inicializaci√≥n del proyecto React**
Se cre√≥ la estructura base del proyecto utilizando React, estableciendo el punto de partida para el desarrollo de la aplicaci√≥n.

**Instalaci√≥n de dependencias principales**
Se instalaron las dependencias esenciales: `firebase` para la autenticaci√≥n y base de datos, y `tailwindcss` para el dise√±o visual.

**Creaci√≥n del layout principal**
Se dise√±√≥ el layout con dos paneles redimensionables y un encabezado superior, permitiendo la navegaci√≥n y organizaci√≥n de los modos de trabajo.

**Implementaci√≥n de pesta√±as de modos**
Se a√±adieron pesta√±as para alternar entre los tres modos principales: Edici√≥n, Estudio y Predicaci√≥n.

---

A partir de aqu√≠, cada nueva funci√≥n o componente desarrollado ser√° documentado en este archivo, siguiendo el mismo formato.

**Componente PanelResizer**
Se desarroll√≥ el componente PanelResizer, encargado de permitir al usuario ajustar el tama√±o de los paneles principales del layout mediante arrastre, mejorando la experiencia de organizaci√≥n y visualizaci√≥n de los modos de trabajo.

**Componente Header**
Se cre√≥ el componente Header para mostrar el encabezado principal de la aplicaci√≥n con el t√≠tulo "El Predicador Cat√≥lico" y estilos visuales destacados. Este componente modulariza la estructura y facilita futuras personalizaciones del encabezado.

**Componente Sidebar**
Se desarroll√≥ el componente Sidebar para mostrar el panel lateral de modos de trabajo (Inicio, Estudio, Predicaci√≥n). Permite al usuario alternar entre los diferentes modos de la aplicaci√≥n de forma visual y accesible, siguiendo el dise√±o modular y facilitando futuras extensiones.

**Componente SermonEditor**
Se cre√≥ el componente SermonEditor para el panel central de edici√≥n de sermones. Permite al usuario crear y editar el t√≠tulo y contenido del serm√≥n, y servir√° como base para a√±adir m√°s herramientas de edici√≥n y estructuraci√≥n en futuras fases.

**Componente ResourcePanel**
Se desarroll√≥ el componente ResourcePanel para el panel derecho de materiales y recursos. Permite buscar recursos y muestra los resultados y materiales encontrados, sirviendo como base para la integraci√≥n futura del buscador y la gesti√≥n de recursos.

**Componente IdeaEditor**
Se cre√≥ el componente IdeaEditor, integrado dentro de SermonEditor, para permitir al usuario a√±adir y visualizar ideas del serm√≥n. Facilita la estructuraci√≥n y organizaci√≥n de los puntos principales del mensaje, mejorando la experiencia de edici√≥n.

**Componente SermonTypeSelector**
Se desarroll√≥ el componente SermonTypeSelector, integrado en el editor de sermones, para seleccionar el tipo de serm√≥n (Homil√≠a, Meditaci√≥n, Catequesis, Reflexi√≥n). Permite personalizar la estructura y enfoque del mensaje desde el inicio de la edici√≥n.

**Componente SermonBuilder**
Se cre√≥ el componente SermonBuilder para mostrar la vista previa del serm√≥n en tiempo real, incluyendo el tipo, t√≠tulo, contenido y las ideas agregadas. Permite al usuario visualizar c√≥mo quedar√° el mensaje antes de guardarlo o presentarlo.

**Componente SermonSaveButton**
Se desarroll√≥ el componente SermonSaveButton, integrado en el editor de sermones, para permitir guardar el serm√≥n creado. Por ahora muestra una alerta de confirmaci√≥n, y servir√° como base para la futura l√≥gica de persistencia en base de datos.

**Persistencia de sermones en Firestore**
Se implement√≥ la l√≥gica para guardar los sermones creados en la base de datos Firestore, permitiendo almacenar el tipo, t√≠tulo, contenido, ideas y fecha de creaci√≥n. El usuario recibe una confirmaci√≥n al guardar exitosamente o un mensaje de error si ocurre alg√∫n problema.
---

## 1. VISI√ìN GENERAL DEL PROYECTO

### 1.1 Prop√≥sito
Recrear y mejorar la aplicaci√≥n web "El Predicador Cat√≥lico" - una herramienta especializada para la creaci√≥n, edici√≥n y presentaci√≥n de sermones cat√≥licos con integraci√≥n de Inteligencia Artificial (Gemini) para b√∫squeda de recursos.

### 1.2 Arquitectura General
- **Tipo:** Single Page Application (SPA)
- **Framework:** React.js con TypeScript
- **Hosting:** Firebase Hosting
- **Estilos:** Tailwind CSS
- **Base de datos:** Firebase Firestore (opcional para persistencia)
- **IA Integration:** Google Gemini API

### 1.3 Responsive Design
- Desktop First (pantalla principal)
- Tablet compatible
- Mobile responsive para consulta

---

## 2. ESTRUCTURA DE LA INTERFAZ

### 2.1 Layout Principal
La aplicaci√≥n debe tener un layout de **dos paneles principales redimensionables**:

#### Panel Izquierdo (60% ancho inicial): "Preparador de Sermones"
- Color de fondo: Blanco (#FFFFFF)
- Padding interno: 24px
- Scroll vertical independiente

#### Panel Derecho (40% ancho inicial): "Buscador de Recursos"
- Color de fondo: Gris claro (#F8F9FA)
- Padding interno: 20px
- Scroll vertical independiente

#### Separador Redimensionable
- **Funcionalidad:** Drag & drop horizontal para redimensionar paneles
- **Rango de redimensi√≥n:** 10% hasta 90% para cualquier panel
- **Visual:** L√≠nea vertical de 4px de ancho, color gris (#D1D5DB)
- **Cursor:** `col-resize` en hover
- **Comportamiento:**
  - Hover: cambiar a color azul (#3B82F6)
  - Drag activo: mostrar indicador visual de porcentaje
  - Double-click: resetear a 60/40 por defecto
- **Persistencia:** Guardar tama√±os en localStorage
- **Responsive:** En mobile/tablet, ignorar redimensi√≥n y usar layout apilado

#### Header Global
- Color de fondo: Degradado p√∫rpura (#6B46C1 a #8B5CF6)
- Altura: 64px
- T√≠tulo: "El Predicador Cat√≥lico" (color blanco, font-weight bold)
- **Integraci√≥n Lit√∫rgica** (lado izquierdo del header):
  - Texto peque√±o: "Hoy: [Fecha lit√∫rgica actual]" 
  - Ejemplo: "Hoy: III Domingo de Adviento - Ciclo A"
  - Color: blanco opaco (#FFFFFF80)
- **Acceso a Biblioteca** (lado derecho del header):
  - Icono de carpeta + "Mi Biblioteca" (clickeable)
  - Bot√≥n fullscreen mantenido en esquina superior derecha

### 2.2 Panel Izquierdo - Detalle de Componentes

#### 2.2.1 Tabs de Modo de Trabajo
Tres tabs horizontales inmediatamente debajo del header:
- **"Modo Edici√≥n"** (azul activo #3B82F6)
- **"Modo Estudio"** (gris inactivo #6B7280)
- **"Modo Predicaci√≥n"** (gris inactivo #6B7280)

Solo el tab activo debe mostrar color azul y text-white.

#### 2.2.2 Secciones del Serm√≥n (Modo Edici√≥n)
**REFERENCIA VISUAL:** Ver Imagen 1 y 2 - formulario completo del serm√≥n

Cada secci√≥n debe ser un componente independiente con dos comportamientos seg√∫n la elecci√≥n del usuario:

**COMPORTAMIENTO A: Generaci√≥n Autom√°tica por IA (Opci√≥n 1)**
- Todos los campos se llenan autom√°ticamente con contenido real basado en las categor√≠as encontradas
- Contenido completamente editable despu√©s de generado

**COMPORTAMIENTO B: Creaci√≥n Manual Guiada (Opci√≥n 2)**
- Los campos muestran placeholders gu√≠a tenues que el usuario puede borrar y reemplazar
- Usuario construye el serm√≥n tomando contenido de las categor√≠as a su gusto

**A. T√çTULO DEL SERM√ìN**
- Label: "T√çTULO DEL SERM√ìN" (may√∫sculas, font-semibold)
- Input tipo text, width completo
- **Opci√≥n 1:** IA llena t√≠tulo basado en tema y recursos
- **Opci√≥n 2:** Placeholder tenue: "Escriba aqu√≠ un t√≠tulo atractivo para su serm√≥n"

**B. INTRODUCCI√ìN**
- Label: "INTRODUCCI√ìN" (may√∫sculas, font-semibold)
- Subsecciones expandibles:

  **B.1 Presentaci√≥n del Tema**
  - Label: "Presentaci√≥n del Tema"
  - Textarea, 3 rows m√≠nimo
  - **Opci√≥n 1:** IA llena con presentaci√≥n contextualizada
  - **Opci√≥n 2:** Placeholder tenue: "Ponga aqu√≠ c√≥mo va a presentar el tema a la audiencia"

  **B.2 Motivaci√≥n Inicial**  
  - Label: "Motivaci√≥n Inicial"
  - Textarea, 3 rows m√≠nimo
  - **Opci√≥n 1:** IA llena con motivaci√≥n espec√≠fica
  - **Opci√≥n 2:** Placeholder tenue: "Ponga aqu√≠ texto que genere expectativa e inter√©s en los oyentes"

**C. IDEAS PRINCIPALES**
**REFERENCIA VISUAL:** Ver Imagen 1 y 2 - estructura completa de ideas desarrolladas

**Configuraci√≥n Inicial:**
- **Serm√≥n sugerido autom√°ticamente:** 5-6 Ideas Principales por defecto
- **Expansibilidad:** Bot√≥n "A√±adir Nueva Idea" permite crear infinitas ideas adicionales
- **Funci√≥n:** Cada idea debe reforzar y desarrollar el t√≠tulo principal del serm√≥n

**C.1 Estructura Completa por Idea Principal**

**NIVEL 1: H1 (Idea Central)**
- **Funci√≥n:** Frase que refuerza directamente el t√≠tulo del serm√≥n
- **Ejemplo:** Si t√≠tulo es "El Amor de Dios", H1 podr√≠a ser "El amor de Dios es incondicional"
- **Input text, una l√≠nea**
- **Visible en:** Modo Edici√≥n, Modo Estudio, Modo Predicaci√≥n

**NIVEL 2: Elemento de Apoyo (Texto Base Sagrado)**
- **Funci√≥n:** Texto completo que fundamenta la Idea Central (H1)
- **Fuentes:** Cita b√≠blica completa, documento de la Iglesia, ense√±anza papal
- **REGLA CR√çTICA:** Nunca reducir, siempre texto COMPLETO - "tiene valor de ley"
- **Dropdown selector de tipo:**
  - "Cita B√≠blica Completa"
  - "Cita del Catecismo Completa"
  - "Documento Pontificio"
  - "Ense√±anza de la Iglesia"
  - "Testimonio Doctrinal"
- **Textarea grande para texto completo**
- **Visible en:** Modo Edici√≥n, Modo Estudio, Modo Predicaci√≥n

**NIVEL 3: Sistema de Disparadores Mentales + P√°rrafos**
- **Cantidad por Idea:** 4 disparadores mentales por defecto (expandible)
- **Funci√≥n:** Explicar, desmenuzar y profundizar el Elemento de Apoyo en relaci√≥n al H1

**Estructura Visual por Disparador (Modo Edici√≥n):**
```
[Disparador Mental - Cuadro delgado]
1-2 l√≠neas m√°ximo - frase que resume el p√°rrafo de abajo

[P√°rrafo Explicativo - Cuadro grande]
P√°rrafo completo que desarrolla y explica el disparador mental
Conecta el Elemento de Apoyo con la Idea Central H1
2-4 p√°rrafos de contenido profundo
```

**Comportamiento por Disparador:**
- **Input text delgado:** Disparador mental (1-2 l√≠neas m√°ximo)
- **Textarea grande:** P√°rrafo completo explicativo
- **Funci√≥n disparador:** Recordar al predicador qu√© contiene el p√°rrafo
- **Relaci√≥n:** Disparador ‚Üí P√°rrafo (1:1)
- **Bot√≥n:** "Eliminar Disparador" (X roja)
- **Bot√≥n:** "Agregar Disparador" al final de cada idea

**C.2 Gesti√≥n Din√°mica de Ideas**
- **Bot√≥n "A√±adir Nueva Idea Principal"** al final de todas las ideas
- **Funcionalidad:** Crear H1, H2, H3, H4, H5, H6... indefinidamente
- **Estructura nueva idea:** H1 + Elemento de Apoyo + 4 disparadores iniciales
- Drag and drop para reordenar ideas completas
- Numeraci√≥n autom√°tica (H1, H2, H3...)
- **Bot√≥n "Eliminar Idea Completa"** (X roja, esquina superior derecha de cada idea)
- **Visible solo en Modo Edici√≥n**

**D. IMPERATIVOS**
- Label: "IMPERATIVOS" (may√∫sculas, font-semibold)
- Textarea, 4 rows m√≠nimo
- **Opci√≥n 1:** IA llena con acciones concretas basadas en el tema
- **Opci√≥n 2:** Placeholder: "Ponga aqu√≠ acciones concretas que deben tomar (conclusi√≥n l√≥gica, no moralismo)"

#### 2.2.3 Modo Estudio
**REFERENCIA VISUAL:** Ver Imagen 3 y 5 - vista de lectura completa para memorizaci√≥n
**PROP√ìSITO:** Predicador lee y memoriza todo el contenido completo para recordarlo en predicaci√≥n

**Funcionalidad:**
Mostrar **TODO el contenido del serm√≥n** en formato de lectura profesional:
- **T√≠tulo del serm√≥n** (heading principal)
- **Introducci√≥n completa** (Presentaci√≥n + Motivaci√≥n)
- **Por cada Idea Principal:**
  - **H1 (Idea Central)** - destacada como subheading
  - **Elemento de Apoyo COMPLETO** - texto √≠ntegro b√≠blico/doctrinal en formato destacado
  - **Todos los disparadores mentales** - visibles como frases cortas
  - **Todos los p√°rrafos completos** - contenido √≠ntegro desarrollado
- **Imperativos** - secci√≥n final

**Caracter√≠sticas t√©cnicas:**
- **Sin campos editables:** Solo texto en formato de lectura
- **Typography profesional:** Headings diferenciados, p√°rrafos bien espaciados, citas destacadas
- **Jerarqu√≠a visual clara:** H1 ‚Üí Elemento de Apoyo ‚Üí Disparador ‚Üí P√°rrafo
- **Sin botones de edici√≥n:** No mostrar "A√±adir Nueva Idea" ni controles de edici√≥n
- **Scroll suave** para lectura continua

**Controles de Presentaci√≥n (Imagen 3 - esquina inferior derecha):**
- **Bot√≥n Configuraci√≥n:** √çcono de engranaje, al hacer clic despliega panel
- **Panel Desplegable con:**
  - **Slider "Tama√±o de Letra":** 1.0em a 2.0em (como muestra Imagen 3)
  - **Slider "Ancho de Contenido":** 60% a 100% de pantalla (como muestra Imagen 3)
- **Comportamiento:** Despu√©s de configurar, panel se oculta autom√°ticamente
- **Persistencia:** Guardar configuraci√≥n en localStorage

#### 2.2.4 Modo Predicaci√≥n  
**REFERENCIA VISUAL:** Estructura minimalista basada en Imagen 3 y 5 pero solo elementos esenciales
**PROP√ìSITO:** Predicador usa solo elementos clave para recordar contenido memorizado en Modo Estudio

**Nueva ventana fullscreen** con contenido minimalista:
- **Fondo blanco limpio**
- **T√≠tulo del serm√≥n** (heading principal)
- **Por cada Idea Principal mostrar √öNICAMENTE:**
  - **H1 (Idea Central)** - subheading destacado
  - **Elemento de Apoyo COMPLETO** - texto √≠ntegro b√≠blico/doctrinal (NUNCA reducido)
  - **Solo los 4 disparadores mentales** - frases de 1-2 l√≠neas
- **Imperativos** - secci√≥n final
- **NO mostrar:** P√°rrafos largos (predicador los recuerda por los disparadores)

**Controles de Presentaci√≥n** (esquina inferior derecha):
- **Slider "Tama√±o de Letra":** 1.0em a 2.0em
- **Slider "Ancho de Contenido":** 60% a 90%
- **Bot√≥n "Cerrar Predicaci√≥n"** (esquina superior derecha)

**Flujo de Uso:**
1. **Modo Edici√≥n:** Crear/editar serm√≥n completo
2. **Modo Estudio:** Leer y memorizar todo el contenido (p√°rrafos completos)
3. **Modo Predicaci√≥n:** Solo disparadores + textos sagrados ‚Üí predicador recuerda p√°rrafos

### 2.3 Panel Derecho - Detalle de Componentes

#### 2.3.1 Header del Buscador
- T√≠tulo: "Buscar temas y recursos para predicaci√≥n"
- Color: texto gris oscuro (#374151)

#### 2.3.2 Barra de B√∫squeda
- Input search con placeholder: "La Eucarist√≠a como fuente y culmen de la vida cristiana"
- Bot√≥n "Buscar" (azul #3B82F6)
- Text helper debajo:
  - "Forma 1: Escribe un tema y haz clic en Buscar."
  - "Forma 2: Haz clic en Buscar (sin escribir nada) para obtener sugerencias."

#### 2.3.3 Secci√≥n de Inicio R√°pido
**Cuando NO hay b√∫squeda activa, mostrar:**

**A. Mensaje de Bienvenida**
- Fondo verde claro (#F0FDF4)
- Border verde (#16A34A) 
- Contenido:
  - "¬øListo para empezar?"
  - "Usa los recursos encontrados para generar un borrador."
  - **Bot√≥n "‚ú® Sugerir Serm√≥n"** (verde, centrado)

#### 2.3.4 Sistema de B√∫squeda Inteligente
**REFERENCIA VISUAL:** Ver Imagen 4 y 6 del proyecto - muestran las dos fases del sistema de b√∫squeda

**FASE 1: B√∫squeda vac√≠a (Imagen 4)**
**Trigger:** Campo de b√∫squeda vac√≠o + clic en "Buscar"
**Resultado:** Mostrar sugerencias inteligentes contextuales

**A. Texto instructivo:**
- "Forma 1: Escribe un tema y haz clic en Buscar."
- "Forma 2: Haz clic en Buscar (sin escribir nada) para obtener sugerencias."

**B. Secci√≥n de Contexto Lit√∫rgico** (nueva - prioritaria)
- **Header:** "Sugerencias para hoy - [Fecha Lit√∫rgica Actual]"
- **Fondo:** Verde muy claro (#F0FDF4) con borde verde
- **Contenido:**
  - Fecha lit√∫rgica espec√≠fica (ej: "III Domingo de Adviento - Ciclo A")
  - 3 sugerencias tem√°ticas basadas en lecturas del d√≠a
  - Bot√≥n: "Ver lecturas completas de hoy"
  - Ejemplo: "La espera vigilante del Se√±or", "Juan Bautista, voz en el desierto", "Alegr√≠a en la esperanza cristiana"

**C. Lista de Sugerencias Generales (10+ t√≠tulos clickeables):**
Cada clic en "Buscar" (campo vac√≠o) debe mostrar 10 t√≠tulos DIFERENTES que no sean repetidos, por ejemplo:
- "El llamado a la santidad en la vida cotidiana"
- "La Eucarist√≠a como fuente y culmen de la vida cristiana"  
- "El perd√≥n y la reconciliaci√≥n: sanando heridas del pasado"
- "Mar√≠a, modelo de fe, esperanza y caridad"
- "La oraci√≥n como di√°logo √≠ntimo con Dios"
- "El servicio al pr√≥jimo como expresi√≥n del amor cristiano"
- "La justicia social a la luz del Evangelio"
- "El discernimiento vocacional: descubriendo el plan de Dios"
- "El valor del sufrimiento y la cruz en la vida cristiana"
- "La esperanza cristiana ante los desaf√≠os del mundo actual"

**D. Comportamiento de las Sugerencias:**
- **Prioridad:** Sugerencias lit√∫rgicas aparecen primero
- Al hacer clic en cualquier sugerencia: se copia autom√°ticamente al campo de b√∫squeda
- Se ejecuta b√∫squeda autom√°tica inmediatamente
- Pasa directamente a FASE 2

**FASE 2: B√∫squeda con tema espec√≠fico (Imagen 1 y 8)**
**Trigger:** Campo con texto + clic "Buscar" (manual o autom√°tico desde sugerencia)
**Resultado:** Llenar todas las categor√≠as con recursos

**A. Estado de B√∫squeda**
- "Buscando..." (con spinner) durante la b√∫squeda
- Mostrar t√©rmino buscado en el campo

**B. Secci√≥n "Generar Serm√≥n" (Imagen 1 - recuadro verde)**
**REFERENCIA VISUAL:** Ver Imagen 1 - recuadro verde despu√©s de b√∫squeda exitosa
- **Ubicaci√≥n:** Inmediatamente despu√©s del campo de b√∫squeda
- **Fondo verde claro** (#F0FDF4)
- **Border verde** (#16A34A)
- **Contenido:**
  - "¬øC√≥mo quieres continuar?"
  - **Opci√≥n 1:** "Pedir a la IA que te sugiera un serm√≥n" [Bot√≥n Verde]
  - **Opci√≥n 2:** "Crear el serm√≥n t√∫ mismo con los recursos proporcionados" [Bot√≥n Verde Outline]
- **Comportamiento:** 
  - Solo visible cuando hay resultados de b√∫squeda exitosos
  - **Opci√≥n 1:** IA llena todos los campos autom√°ticamente con contenido de las categor√≠as
  - **Opci√≥n 2:** Campos aparecen con placeholders gu√≠a editables

**C. Categor√≠as de Recursos Din√°micas (Imagen 1 y 8)**
**REFERENCIA VISUAL:** Ver Imagen 1 - categor√≠as con n√∫meros din√°micos (1), (8), (5), etc.

Sistema de acorde√≥n expandible con contadores que se llenan din√°micamente seg√∫n resultados:

1. **DOCTRINA CAT√ìLICA** (n√∫mero entre par√©ntesis)
2. **CATECISMO** (n√∫mero entre par√©ntesis)
3. **SANTORAL CAT√ìLICO** (n√∫mero entre par√©ntesis)
4. **CITAS B√çBLICAS RELEVANTES** (n√∫mero entre par√©ntesis)
5. **REFLEXIONES SOBRE EL TEMA** (n√∫mero entre par√©ntesis)
6. **EJEMPLOS PR√ÅCTICOS** (n√∫mero entre par√©ntesis)
7. **TESTIMONIOS Y EXPERIENCIAS** (n√∫mero entre par√©ntesis)
8. **DATOS CIENT√çFICOS/HIST√ìRICOS** (n√∫mero entre par√©ntesis)
9. **VIDEOS DE YOUTUBE** (n√∫mero entre par√©ntesis)
10. **REFERENCIAS DOCTRINALES** (n√∫mero entre par√©ntesis)
11. **DOCUMENTOS OFICIALES DE LA IGLESIA** (n√∫mero entre par√©ntesis)

**Comportamiento de Categor√≠as:**
- Click en categor√≠a: expande/contrae contenido
- Mostrar ‚ñ∂ cuando colapsada, ‚ñº cuando expandida
- Contenido de cada categor√≠a: lista de recursos con:
  - T√≠tulo del recurso (clickeable)
  - Descripci√≥n breve (2-3 l√≠neas)
  - Botones: "Leer m√°s" | "Copiar"

---

## 3. INTEGRACI√ìN CON GEMINI AI

### 3.1 Configuraci√≥n del Prompt Maestro
La aplicaci√≥n debe integrar completamente el prompt especializado proporcionado como **instrucciones base** para Gemini. Este prompt define:
- Identidad como asistente cat√≥lico especializado
- Estructura del serm√≥n ("CHIFONIER")
- Fuentes autorizadas de conocimiento
- Criterios de exclusi√≥n absolutos
- Metodolog√≠a por tipo de mensaje

### 3.2 Flujo de B√∫squeda de Recursos

#### 3.2.1 Integraci√≥n con Calendario Lit√∫rgico
**Fuentes de Datos Lit√∫rgicos:**
- **API primaria:** Vatican.va (lecturas oficiales)
- **APIs secundarias:** USCCB.org, ACI Prensa (lecturas en espa√±ol)
- **Fallback local:** Base de datos local con fechas lit√∫rgicas principales

**Funcionalidades de Integraci√≥n:**
- **Detecci√≥n autom√°tica de fecha:** Al abrir aplicaci√≥n, mostrar contexto lit√∫rgico actual
- **Sugerencias contextuales:** Generar temas apropiados para la liturgia del d√≠a
- **Lecturas del d√≠a:** Acceso directo a lecturas completas (Primera, Salmo, Segunda, Evangelio)
- **Ciclo lit√∫rgico:** Identificaci√≥n autom√°tica de Ciclo A/B/C y temporada
- **Fechas especiales:** Reconocimiento de solemnidades, fiestas y memorias

#### 3.2.2 Generaci√≥n de Sugerencias Lit√∫rgicas
**Trigger:** Sistema autom√°tico al cargar aplicaci√≥n + b√∫squeda vac√≠a
**Request a Gemini:**
```
Prompt Maestro + "Genera exactamente 3 sugerencias espec√≠ficas de temas para serm√≥n basadas en el contexto lit√∫rgico actual:

CONTEXTO LIT√öRGICO:
Fecha: [FECHA_ACTUAL]
Tiempo Lit√∫rgico: [TEMPORADA_ACTUAL]
Nombre Lit√∫rgico: [NOMBRE_ESPECIFICO] (ej: III Domingo de Adviento)
Ciclo: [CICLO_A_B_C]

LECTURAS DEL D√çA:
Primera Lectura: [TEXTO_PRIMERA_LECTURA]
Salmo Responsorial: [TEXTO_SALMO]
Segunda Lectura: [TEXTO_SEGUNDA_LECTURA] (si aplica)
Evangelio: [TEXTO_EVANGELIO]

Genera 3 temas que conecten directamente con las lecturas y el contexto lit√∫rgico. Cada tema debe ser espec√≠fico, atractivo y apropiado para la celebraci√≥n del d√≠a.

Formato: lista simple, un tema por l√≠nea, m√°ximo 80 caracteres por tema."
```

#### 3.2.3 Generaci√≥n de Sugerencias Generales (Campo Vac√≠o)
**Trigger:** Usuario hace clic en "Buscar" sin texto en el campo
**REFERENCIA VISUAL:** Ver Imagen 6 - muestra sugerencias desplegadas

**Request a Gemini:**
```
Prompt Maestro + "Genera exactamente 10 sugerencias DIFERENTES de temas para sermones cat√≥licos. Cada sugerencia debe ser espec√≠fica, relevante para la liturgia actual, y adecuada para predicaci√≥n. 

IMPORTANTE: Las sugerencias deben ser completamente diferentes a las anteriores generadas. Var√≠a temas, enfoques y estilos.

Formato: lista simple, un tema por l√≠nea, m√°ximo 80 caracteres por tema."
```

**Procesamiento:**
- Cada click debe generar 10 sugerencias completamente NUEVAS
- Guardar las √∫ltimas 50 sugerencias para evitar repetici√≥n
- Al hacer clic en una sugerencia: copiar al campo + ejecutar b√∫squeda autom√°tica

#### 3.2.4 B√∫squeda de Recursos por Tema
**Trigger:** Campo con texto + clic "Buscar" (manual o autom√°tico desde sugerencia clickeada)
**REFERENCIA VISUAL:** Ver Imagen 1 - resultado exitoso con categor√≠as llenas

**Request a Gemini:**
```
Prompt Maestro + "Busca recursos cat√≥licos para el tema espec√≠fico: '[TEMA_EXACTO]'. 

Organiza los resultados en estas categor√≠as exactas y cuenta cu√°ntos recursos v√°lidos encontraste en cada una:

1. DOCTRINA CAT√ìLICA - Ense√±anzas oficiales del Magisterio
2. CATECISMO - Referencias del Catecismo de la Iglesia Cat√≥lica
3. SANTORAL CAT√ìLICO - Santos relacionados, festividades, ejemplos de vida
4. CITAS B√çBLICAS RELEVANTES - Vers√≠culos aplicables (solo Biblias cat√≥licas)
5. REFLEXIONES SOBRE EL TEMA - Meditaciones y profundizaciones teol√≥gicas
6. EJEMPLOS PR√ÅCTICOS - Aplicaciones concretas para la vida diaria
7. TESTIMONIOS Y EXPERIENCIAS - Historias reales de conversi√≥n, sanaci√≥n, etc.
8. DATOS CIENT√çFICOS/HIST√ìRICOS - Hechos que apoyen o ilustren el tema
9. VIDEOS DE YOUTUBE - Enlaces de canales cat√≥licos confiables
10. REFERENCIAS DOCTRINALES - Documentos pontificios, enc√≠clicas relevantes
11. DOCUMENTOS OFICIALES DE LA IGLESIA - Textos del Vaticano, conferencias episcopales

Para cada recurso incluye: t√≠tulo descriptivo, fuente autorizada, descripci√≥n de 2-3 l√≠neas, y contenido completo cuando sea relevante.

SOLO usar fuentes cat√≥licas ortodoxas aprobadas. RECHAZAR cualquier fuente sectaria, protestante o anti-cat√≥lica."
```

**Procesamiento de Respuesta:**
- Parsear respuesta de Gemini por categor√≠as
- Contar recursos v√°lidos por categor√≠a ‚Üí actualizar n√∫meros (0), (1), (8), etc.
- Organizar contenido de cada categor√≠a para mostrar al expandir
- Mostrar recuadro verde "Sugerir Serm√≥n" solo cuando hay resultados exitosos

#### 3.2.5 Generaci√≥n Autom√°tica de Serm√≥n (Opci√≥n 1)
**Trigger:** Usuario hace clic "Pedir a la IA que te sugiera un serm√≥n"
**Contexto:** Tema espec√≠fico + recursos encontrados en todas las categor√≠as

**Request a Gemini:**
```
Prompt Maestro + "Crea un serm√≥n COMPLETO usando la estructura CHIFONIER sobre el tema: '[TEMA_EXACTO]'. 

ESTRUCTURA REQUERIDA:
1. T√≠tulo atractivo y espec√≠fico
2. Introducci√≥n completa (Presentaci√≥n del tema + Motivaci√≥n inicial)
3. EXACTAMENTE 5-6 Ideas Principales, cada una con:
   - H1: Frase que refuerza el t√≠tulo principal
   - Elemento de Apoyo: Texto b√≠blico/doctrinal COMPLETO (nunca resumido)
   - 4 Disparadores Mentales con sus respectivos p√°rrafos desarrollados
4. Imperativos (acciones concretas)

CONTEXTO LIT√öRGICO (si aplica):
[INFORMACION_LITURGICA_COMPLETA]
[LECTURAS_DEL_DIA_COMPLETAS]

RECURSOS DISPONIBLES POR CATEGOR√çA:
[DOCTRINA_CATOLICA_RECURSOS]
[CATECISMO_RECURSOS] 
[SANTORAL_RECURSOS]
[CITAS_BIBLICAS_RECURSOS]
[REFLEXIONES_RECURSOS]
[EJEMPLOS_PRACTICOS_RECURSOS]
[TESTIMONIOS_RECURSOS]
[DATOS_HISTORICOS_RECURSOS]
[REFERENCIAS_DOCTRINALES_RECURSOS]
[DOCUMENTOS_IGLESIA_RECURSOS]

PARA CADA IDEA PRINCIPAL:
- H1 debe reforzar espec√≠ficamente el t√≠tulo del serm√≥n
- Elemento de Apoyo: usar recursos encontrados, texto √çNTEGRO
- Cada Disparador Mental: m√°ximo 1-2 l√≠neas que resuman el p√°rrafo
- Cada P√°rrafo: 2-4 p√°rrafos que expliquen y profundicen el Elemento de Apoyo en relaci√≥n al H1

DURACI√ìN OBJETIVO: 15-20 minutos de predicaci√≥n
AUDIENCIA: Feligreses cat√≥licos promedio

Estructura exacta para llenar formulario:
T√çTULO: [t√≠tulo]
PRESENTACI√ìN: [presentaci√≥n]  
MOTIVACI√ìN: [motivaci√≥n]
IDEA_1_H1: [h1]
IDEA_1_ELEMENTO: [texto completo]
IDEA_1_DISPARADOR_1: [disparador] | P√ÅRRAFO_1: [p√°rrafo]
IDEA_1_DISPARADOR_2: [disparador] | P√ÅRRAFO_2: [p√°rrafo]
IDEA_1_DISPARADOR_3: [disparador] | P√ÅRRAFO_3: [p√°rrafo]  
IDEA_1_DISPARADOR_4: [disparador] | P√ÅRRAFO_4: [p√°rrafo]
[Repetir estructura para IDEA_2 hasta IDEA_5/6]
IMPERATIVOS: [imperativos]
```

**Procesamiento:**
- Parsear respuesta estructurada de Gemini
- Crear autom√°ticamente 5-6 Ideas Principales en el formulario
- Llenar cada idea con: H1 + Elemento de Apoyo + 4 pares Disparador-P√°rrafo
- **Asociar contexto lit√∫rgico** autom√°ticamente al serm√≥n generado
- **Generar tags autom√°ticos** basados en contenido y contexto
- Todos los campos completamente editables despu√©s de generados
- Usuario puede agregar m√°s ideas con bot√≥n "A√±adir Nueva Idea"
- **Guardar autom√°ticamente en biblioteca** con metadatos completos

#### 3.2.6 Creaci√≥n Manual Guiada (Opci√≥n 2)  
**Trigger:** Usuario hace clic "Crear el serm√≥n t√∫ mismo con los recursos proporcionados"
**Contexto:** Mismo tema + mismas categor√≠as, pero usuario construye manualmente

**Comportamiento:**
- NO hacer request a Gemini para contenido completo
- Mostrar formulario en Modo Edici√≥n con placeholders gu√≠a tenues
- Usuario puede borrar placeholders y usar contenido de las categor√≠as expandibles
- **Placeholders por campo:**
  - T√≠tulo: "Escriba aqu√≠ un t√≠tulo atractivo para su serm√≥n"
  - Presentaci√≥n: "Ponga aqu√≠ c√≥mo va a presentar el tema a la audiencia"
  - Motivaci√≥n: "Ponga aqu√≠ texto que genere expectativa e inter√©s en los oyentes"
  - Disparador Mental: "Ponga aqu√≠ un disparador mental - frase que le recuerde todo el contenido"
  - Contenido: "Ponga aqu√≠ un p√°rrafo largo desarrollando completamente esta idea"
  - Elemento Apoyo: "Ponga aqu√≠ un texto b√≠blico / testimonio / ejemplo seg√∫n corresponda"
  - Imperativos: "Ponga aqu√≠ acciones concretas que deben tomar"

**Flujo de Trabajo Manual:**
1. Usuario ve placeholders gu√≠a
2. Expande categor√≠as de recursos del panel derecho
3. Copia/adapta contenido de categor√≠as a los campos
4. Construye serm√≥n a su ritmo y estilo personal

### 3.3 Gesti√≥n de Estados de IA

#### 3.3.1 Estados Visuales
- **Idle:** Interfaz normal
- **Searching:** Mostrar "Buscando..." con spinner
- **Success:** Mostrar resultados
- **Error:** Mostrar mensaje de error amigable

#### 3.3.2 Cache y Performance
- Cachear b√∫squedas recientes (localStorage)
- Timeout de 30 segundos para requests
- Retry autom√°tico (m√°ximo 2 intentos)

---

## 4. SISTEMA DE EXPORTACI√ìN

### 4.1 Ubicaci√≥n del Men√∫ de Exportaci√≥n
- Dropdown menu en la esquina superior derecha del panel izquierdo
- Icono: üì§ "Exportar"
- Disponible solo en "Modo Edici√≥n"

### 4.2 Funcionalidad "Mi Biblioteca"
**Trigger:** Click en "Mi Biblioteca" desde el header
**Comportamiento:** Abrir modal/drawer sobre la aplicaci√≥n principal

**Contenido de la Biblioteca:**
- **Historial completo** de sermones creados anteriormente
- **Vista de tarjetas** con:
  - T√≠tulo del serm√≥n
  - Fecha de creaci√≥n
  - Tema lit√∫rgico (si aplica)
  - Tags autom√°ticos (Adviento, Cuaresma, Eucarist√≠a, etc.)
  - √öltima fecha de modificaci√≥n
- **Filtros disponibles:**
  - Por fecha (m√°s reciente, m√°s antiguo)
  - Por temporada lit√∫rgica
  - Por tema principal
  - Por frecuencia de uso
- **Acciones por serm√≥n:**
  - "Abrir": Cargar serm√≥n en el editor actual
  - "Duplicar": Crear copia para editar
  - "Eliminar": Borrar de la biblioteca
  - "Exportar": Acceso directo a opciones de exportaci√≥n

**Gesti√≥n de Tags:**
- **Tags autom√°ticos:** Sistema genera tags basados en contenido (santos, sacramentos, virtudes)
- **Tags de temporada:** Autom√°ticos seg√∫n fecha lit√∫rgica del momento de creaci√≥n
- **B√∫squeda inteligente:** Campo de b√∫squeda dentro de la biblioteca

### 4.3 Opciones de Exportaci√≥n

#### 4.2.1 Exportar como HTML
**Funcionalidad:**
- Generar archivo .html completo
- Incluir CSS embebido para formato profesional
- Preservar estructura de headings y p√°rrafos
- Optimizado para impresi√≥n web

**Formato de salida:**
- Header con t√≠tulo del serm√≥n
- Estilos profesionales embebidos
- Estructura sem√°ntica correcta
- Footer con fecha de creaci√≥n

#### 4.2.2 Exportar como Word (.docx)
**Funcionalidad:**
- Generar archivo .docx compatible con Microsoft Word
- Formato profesional con estilos definidos
- Estructura de headings mantenida
- Editable despu√©s de exportar

**Estructura del documento:**
- P√°gina de t√≠tulo
- Estructura del serm√≥n con formato
- M√°rgenes y tipograf√≠a profesional

#### 4.2.3 Exportar como PDF
**Funcionalidad:**
- Generar PDF de alta calidad
- No editable, formato final
- Optimizado para impresi√≥n f√≠sica
- Watermark opcional: "Creado con El Predicador Cat√≥lico"

#### 4.2.4 Exportar como Texto Estructurado
**Funcionalidad:**
- Archivo .txt simple
- Mantener estructura con indentaci√≥n
- Compatible con cualquier editor de texto
- Formato de backup ligero

### 4.3 Implementaci√≥n T√©cnica de Exportaci√≥n
**Librer√≠as requeridas:**
- `html2pdf.js` para PDF
- `docx` para Word
- `file-saver` para descargas
- Generaci√≥n nativa para HTML/TXT

---

## 5. PERSISTENCIA Y ALMACENAMIENTO

### 5.1 Almacenamiento Local Expandido
- **localStorage** para:
  - Borrador actual del serm√≥n
  - **Biblioteca completa de sermones** (historial con metadatos)
  - Cache de b√∫squedas recientes
  - Preferencias de usuario (tama√±os de paneles, configuraci√≥n de presentaci√≥n)
  - Historial de temas buscados
  - Configuraci√≥n de layout (proporci√≥n de paneles)
  - **Cache del calendario lit√∫rgico** (datos de fechas especiales)
  - **Sistema de tags** autom√°ticos y manuales

### 5.2 Estructura de Datos del Serm√≥n Expandida
```typescript
interface Sermon {
  id: string;
  titulo: string;
  fechaCreacion: string;
  fechaModificacion: string;
  contextoLiturgico?: {
    fecha: string;
    temporada: 'Adviento' | 'Navidad' | 'Cuaresma' | 'Pascua' | 'Tiempo Ordinario';
    ciclo: 'A' | 'B' | 'C';
    nombreLiturgico: string;
    lecturas?: {
      primera: string;
      salmo: string;
      segunda?: string;
      evangelio: string;
    };
  };
  tags: string[]; // Tags autom√°ticos y manuales
  vecesUsado: number; // Contador de veces que se abri√≥
  introduccion: {
    presentacion: string;
    motivacion: string;
  };
  ideas: Array<{
    id: string;
    h1: string; // Idea central
    elementoApoyo: {
      tipo: 'cita_biblica' | 'catecismo' | 'documento_pontificio' | 'ensenanza_iglesia' | 'testimonio_doctrinal';
      contenido: string; // Texto completo
    };
    disparadores: Array<{
      id: string;
      disparador: string; // 1-2 l√≠neas
      parrafo: string; // P√°rrafo completo
      orden: number;
    }>;
    orden: number;
  }>;
  imperativos: string;
}

interface BibliotecaSermon {
  id: string;
  titulo: string;
  fechaCreacion: string;
  fechaUltimaModificacion: string;
  contextoLiturgico?: string; // Nombre legible
  tags: string[];
  vecesUsado: number;
  estadisticas: {
    tiempoTotalEdicion: number; // minutos
    ultimaVezAbierto: string;
  };
}
```

### 5.3 Estructura de Datos de Preferencias
```typescript
interface UserPreferences {
  layout: {
    leftPanelWidth: number; // porcentaje 10-90
    rightPanelWidth: number; // porcentaje 10-90
  };
  presentation: {
    fontSize: number; // 1.0-2.0em
    contentWidth: number; // 60-90%
  };
  search: {
    recentSearches: string[];
    cachedSuggestions: string[];
  };
}
```

### 5.4 Auto-guardado Inteligente
- **Guardar en biblioteca autom√°ticamente** cada vez que se completa un serm√≥n
- Guardar cambios autom√°ticamente cada 30 segundos en borrador actual
- Guardar inmediatamente al cambiar de secci√≥n
- **Detecci√≥n de contexto lit√∫rgico:** Autom√°ticamente detectar y asociar fecha lit√∫rgica
- **Generaci√≥n autom√°tica de tags** basada en contenido del serm√≥n
- Indicador visual de estado de guardado
- **Backup de seguridad:** Mantener √∫ltimas 5 versiones de cada serm√≥n

---

## 6. RESPONSIVE DESIGN Y ACCESIBILIDAD

### 6.1 Breakpoints
- **Desktop:** 1024px+ (layout dos paneles redimensionables)
- **Tablet:** 768px-1023px (paneles apilables, redimensi√≥n deshabilitada)
- **Mobile:** <768px (navegaci√≥n por tabs, redimensi√≥n deshabilitada)

### 6.2 Mobile Adaptations
- Convertir panel derecho en modal/drawer
- Tabs superiores para alternar vista
- Botones de acci√≥n m√°s grandes
- Typography adaptada

### 6.3 Accesibilidad
- Contraste WCAG AA compliant
- Navegaci√≥n por teclado completa
- Screen reader friendly
- Focus indicators visibles
- Semantic HTML structure

---

## 7. PERFORMANCE Y OPTIMIZACI√ìN

### 7.1 Lazy Loading
- Cargar componentes bajo demanda
- Chunking de c√≥digo por rutas
- Images lazy loading

### 7.2 Bundle Optimization
- Tree shaking habilitado
- Code splitting por rutas
- Compression gzip/brotli
- Service worker para caching

---

## 8. TESTING Y CALIDAD

### 8.1 Tipos de Testing
- Unit tests para funciones puras
- Integration tests para flujos completos
- E2E tests para casos de uso cr√≠ticos
- Visual regression tests

### 8.2 Quality Gates
- ESLint + Prettier configurados
- TypeScript strict mode
- Pre-commit hooks con Husky
- CI/CD pipeline con tests autom√°ticos

---

## 9. DEPLOYMENT Y HOSTING

### 9.1 Configuraci√≥n Firebase
- Firebase Hosting para static files
- Firebase Functions para API calls (opcional)
- Environment variables para API keys
- Custom domain configuration

### 9.2 CI/CD Pipeline
- GitHub Actions para build autom√°tico
- Deploy autom√°tico a staging en PR
- Deploy a producci√≥n en merge a main
- Rollback capabilities

---

## 10. MONITOREO Y ANALYTICS

### 10.1 Error Tracking
- Sentry para error monitoring
- Logging de errores de IA integration
- Performance monitoring

### 10.2 Usage Analytics
- Google Analytics para usage patterns
- Track b√∫squedas m√°s comunes
- Monitor export functionality usage
- User journey analysis

---

Esta especificaci√≥n est√° dise√±ada para ser implementada por Visual Studio con Copilot, proporcionando todos los detalles t√©cnicos necesarios sin c√≥digo espec√≠fico, pero con suficiente detalle para guiar la implementaci√≥n completa.